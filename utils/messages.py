"""
๐ Message Templates (Enhanced UX)
Improved user experience with clearer explanations and helpful content
"""

from config import CONFIG
from storage.models import Base, DatabaseManager


def get_welcome_message(fullname: str | None = None) -> str:
    """Returns a comprehensive, user-friendly welcome message explaining what the bot does."""
    name_line = f"ุฃููุงู ูุณููุงู {fullname}! ๐\n\n" if fullname else "ูุฑุญุจุงู ุจู! ๐\n\n"

    return (
        name_line
        + "๐ **ูุง ูู ูุฐุง ุงูุจูุชุ**\n"
        + "ุจูุช ุฐูู ููุชุงุจุนุฉ ุฏุฑุฌุงุชู ุงูุฌุงูุนูุฉ ุจุณูููุฉ ูุฃูุงู!\n\n"
        + "โจ **ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ:**\n"
        + "โข ๐ ุนุฑุถ ุฏุฑุฌุงุชู ุงูุญุงููุฉ ูุงูุณุงุจูุฉ\n"
        + "โข ๐ ุฅุดุนุงุฑุงุช ููุฑูุฉ ุนูุฏ ุชุญุฏูุซ ุงูุฏุฑุฌุงุช\n"
        + "โข ๐ฑ ูุงุฌูุฉ ุณููุฉ ุงูุงุณุชุฎุฏุงู\n"
        + "โข ๐ ุญูุงูุฉ ูุงููุฉ ูุจูุงูุงุชู\n\n"
        + "๐ **ููุจุฏุก:**\n"
        + "ุงุถุบุท ุนูู '๐ ุชุณุฌูู ุงูุฏุฎูู ููุฌุงูุนุฉ' ูุฃุฏุฎู ุจูุงูุงุชู\n\n"
        + "๐ **ุงูุฃูุงู:**\n"
        + "โข ุชุดููุฑ ูุงูู ููุจูุงูุงุช\n"
        + "โข ูุนุงููุฑ ุฃูุงู ุนุงููุฉ (OWASP + NIST)\n"
        + "โข ูุง ูุฎุฒู ูููุงุช ุงููุฑูุฑ ููุงุฆูุงู\n"
        + "โข ูุง ูุชู ูุญุต ุฃู ุฌูุจ ุฏุฑุฌุงุชู ุฃู ุงูุงุท๏ปปุน ุนูููุง ูู ูุจู ุงููุทูุฑ ุฅูุง ุนูุฏูุง ุชุทูุจ ุฐูู ุจููุณู.\n\n"
        + f"๐จโ๐ป ุงููุทูุฑ: {CONFIG['ADMIN_USERNAME']}\n"
        + "\n๐ [ุฑุงุจุท ุงูููุฏ ุงูุจุฑูุฌู (GitHub) - ููุดูุงููุฉ ุงููุงููุฉ ููุนุฑูุฉ ููู ูุนูู ุงูุจูุช](https://github.com/sispt/grade-phoenix-bot?refresh)\n"
    )


def get_simple_welcome_message() -> str:
    """Returns a clear and concise welcome message for new users."""
    return (
        "ูุฑุญุจุงู! ๐\n\n"
        + "๐ **ุจูุช ูุชุงุจุนุฉ ุงูุฏุฑุฌุงุช ุงูุฌุงูุนูุฉ**\n\n"
        + "**ูุงุฐุง ููุนู ุงูุจูุชุ**\n"
        + "โข ูุนุฑุถ ุฏุฑุฌุงุชู ุงูุฌุงูุนูุฉ ุจุณูููุฉ\n"
        + "โข ูุฎุจุฑู ููุฑุงู ุนูุฏ ุชุญุฏูุซ ุงูุฏุฑุฌุงุช\n"
        + "โข ูุงุฌูุฉ ุจุณูุทุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู\n"
        + "โข ุญูุงูุฉ ูุงููุฉ ูุจูุงูุงุชู\n\n"
        + "**ููู ุชุจุฏุฃุ**\n"
        + "ุงุถุบุท '๐ ุชุณุฌูู ุงูุฏุฎูู ููุฌุงูุนุฉ' ูุฃุฏุฎู ุจูุงูุงุชู ุงูุฌุงูุนูุฉ\n\n"
        + "๐ **ุงูุฃูุงู:**\n"
        + "ุจูุงูุงุชู ูุดูุฑุฉ ููุญููุฉ ุจุงููุงูู\n\n"
        + f"๐จโ๐ป ูููุณุงุนุฏุฉ: {CONFIG['ADMIN_USERNAME']}"
    )


def get_security_welcome_message() -> str:
    """Returns a security-focused welcome message for returning users."""
    return (
        "ูุฑุญุจุงู ุจุนูุฏุชู! ๐\n\n"
        + "โ **ุญุงูุฉ ุงูุฃูุงู:** ููุชุงุฒุฉ (A+)\n"
        + "๐ **ุญูุงูุฉ ุงูุจูุงูุงุช:** ูุดูุฑุฉ ุจุงููุงูู\n"
        + "๐ก๏ธ **ูุนุงููุฑ ุงูุฃูุงู:** OWASP + NIST + GDPR\n\n"
        + "**ุงูุฃูุงูุฑ ุงูุฃูููุฉ:**\n"
        + "๐ `/security_info` - ูุนูููุงุช ุงูุฃูุงู ุงูุชูุตูููุฉ\n"
        + "๐ `/security_audit` - ุชูุฑูุฑ ุงูุชุฏููู ุงูุฃููู\n"
        + "๐ `/privacy_policy` - ุณูุงุณุฉ ุงูุฎุตูุตูุฉ\n"
        + "๐ก๏ธ `/security_headers` - ุฑุคูุณ ุงูุฃูุงู\n\n"
        + "๐ก **ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ ุฃุฏูุงู ูููุตูู ููููุฒุงุช**\n"
        + "๐ฏ **ูุตูุญุฉ:** ุฌุฑุจ '๐ ุฏุฑุฌุงุช ุงููุตู ุงูุญุงูู' ูุฑุคูุฉ ุฃุญุฏุซ ุฏุฑุฌุงุชู"
    )


def get_support_message() -> str:
    """Returns a friendly support message with a direct contact link."""
    admin_username = CONFIG["ADMIN_USERNAME"]
    return (
        f"๐ ููุฏุนู ุงูููู: {admin_username}\n"
        f"ุฃู ุงุถุบุท ุงูุฒุฑ ุฃุฏูุงู ููุชูุงุตู ูุจุงุดุฑุฉ ุนุจุฑ ุชูููุฌุฑุงู."
    )


def get_help_message() -> str:
    """Returns a comprehensive help message with clear instructions and support contact."""
    admin_username = CONFIG["ADMIN_USERNAME"]
    return (
        "โ **ุงููุณุงุนุฏุฉ ูุงูุฏุนู**\n\n"
        "- ููููู ุฏุงุฆูุงู ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุงูุจูุช ุฃู ุงูุฅุจูุงุบ ุนู ูุดููุฉ ูู ุฎูุงู ุงูููุฏ ุงูุจุฑูุฌู ุนูู GitHub.\n"
        "- ูุฐุง ุงูุฑุงุจุท ูุชููุฑ ููุดูุงููุฉ ุงููุงููุฉ: [GitHub](https://github.com/sispt/grade-phoenix-bot?refresh)\n\n"
        "- ูุง ูุชู ุชุฎุฒูู ูููุงุช ุงููุฑูุฑ ููุงุฆูุงู.\n"
        "- ูุง ูุชู ูุญุต ุฃู ุฌูุจ ุฏุฑุฌุงุชู ุฅูุง ุนูุฏูุง ุชุทูุจ ุฐูู ุจููุณู.\n"
        "- ูุฃู ุงุณุชูุณุงุฑ ุขุฎุฑุ ุชูุงุตู ูุน ุงููุทูุฑ."
    )


def get_error_message(error_type: str = "ุนุงู") -> str:
    """Returns enhanced error messages with helpful guidance."""
    error_messages = {
        "login_failed": "โ ุชุนุฐูุฑ ุชุณุฌูู ุงูุฏุฎูู\n\n**ุงูุญููู ุงูููุชุฑุญุฉ:**\nโข ุชุฃูุฏ ูู ุตุญุฉ ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ\nโข ุชุฃูุฏ ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช\nโข ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ุจุนุฏ ูููู\n\n๐ ูููุณุงุนุฏุฉ: ุงุถุบุท '๐ ุงูุฏุนู ุงูููู'",
        "network_error": "๐ ุญุฏุซ ุฎุทุฃ ูู ุงูุงุชุตุงู\n\n**ุงูุญููู ุงูููุชุฑุญุฉ:**\nโข ุชุญูู ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช\nโข ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ุจุนุฏ ูููู\nโข ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุชูุงุตู ูุน ุงูุฏุนู\n\n๐ ูููุณุงุนุฏุฉ: ุงุถุบุท '๐ ุงูุฏุนู ุงูููู'",
        "api_error": "๐ง ุงููุธุงู ุบูุฑ ูุชุงุญ ุญุงููุงู\n\n**ูุนูููุงุช:**\nโข ูุฏ ูููู ุงููุธุงู ูู ุตูุงูุฉ\nโข ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ุจุนุฏ 5-10 ุฏูุงุฆู\nโข ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุชูุงุตู ูุน ุงูุฏุนู\n\n๐ ูููุณุงุนุฏุฉ: ุงุถุบุท '๐ ุงูุฏุนู ุงูููู'",
        "token_expired": "โฐ ุงูุชูุช ุตูุงุญูุฉ ุงูุฌูุณุฉ\n\n**ุงูุญู:**\nโข ุงุถุบุท '๐ ุฅุนุงุฏุฉ ุชุณุฌูู ุงูุฏุฎูู'\nโข ุฃุฏุฎู ุจูุงูุงุชู ูุฑุฉ ุฃุฎุฑู\nโข ูุฐุง ุทุจูุนู ููุญุฏุซ ูู ูุชุฑุฉ\n\n๐ ุจูุงูุงุชู ุขููุฉ ููุดูุฑุฉ",
        "no_grades": "๐ ูุง ุชูุฌุฏ ุฏุฑุฌุงุช ูุชุงุญุฉ ุญุงููุงู\n\n**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**\nโข ูู ูุชู ูุดุฑ ุงูุฏุฑุฌุงุช ุจุนุฏ\nโข ูุฏ ุชููู ูู ูุชุฑุฉ ุฅุฌุงุฒุฉ\nโข ุชุญูู ูู ุงููุธุงู ูุงุญูุงู\n\n๐ ูููุณุงุนุฏุฉ: ุงุถุบุท '๐ ุงูุฏุนู ุงูููู'",
        "general": "โ ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน\n\n**ุงูุญููู:**\nโข ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ุจุนุฏ ูููู\nโข ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุชูุงุตู ูุน ุงูุฏุนู\nโข ุชุฃูุฏ ูู ุงุชุตุงูู ุจุงูุฅูุชุฑูุช\n\n๐ ูููุณุงุนุฏุฉ: ุงุถุบุท '๐ ุงูุฏุนู ุงูููู'",
    }
    return error_messages.get(error_type, error_messages["general"])


def get_success_message(action: str) -> str:
    """Returns enhanced success messages with next steps."""
    success_messages = {
        "login": "โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!\n\n๐ **ูุฑุญุจุงู ุจู ูู ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุฌุงูุนูุฉ**\n\n**ููููู ุงูุขู:**\nโข ๐ ูุญุต ุฏุฑุฌุงุชู ุงูุญุงููุฉ\nโข ๐ ูุฑุงุฌุนุฉ ุฏุฑุฌุงุช ุงููุตู ุงูุณุงุจู\nโข ๐ ุงุณุชูุงู ุฅุดุนุงุฑุงุช ุนูุฏ ุชุญุฏูุซ ุงูุฏุฑุฌุงุช\nโข โ๏ธ ุชุฎุตูุต ุฅุนุฏุงุฏุงุชู\n\n๐ก **ูุตูุญุฉ:** ุฌุฑุจ '๐ ุฏุฑุฌุงุช ุงููุตู ุงูุญุงูู' ูุฑุคูุฉ ุฃุญุฏุซ ุฏุฑุฌุงุชู",
        "grades_updated": "๐ ุชู ุชุญุฏูุซ ุงูุฏุฑุฌุงุช ุจูุฌุงุญ!\n\nโ **ุชู ูุญุต ุฏุฑุฌุงุชู ูุชุญุฏูุซูุง**\n\n**ุฅุฐุง ูุงู ููุงู ุชุบููุฑุงุช:**\nโข ุณุชุชููู ุฅุดุนุงุฑุงู ููุฑูุงู\nโข ููููู ูุฑุงุฌุนุฉ ุงูุชุบููุฑุงุช\nโข ุงูุจูุงูุงุช ูุญููุธุฉ ุจุฃูุงู\n\n๐ก **ูุตูุญุฉ:** ุงุณุชุฎุฏู '๐ ุฏุฑุฌุงุช ุงููุตู ุงูุณุงุจู' ูููุงุฑูุฉ ุงูุฃุฏุงุก",
        "settings_saved": "โ๏ธ ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ!\n\nโ **ุชู ุชุญุฏูุซ ุฅุนุฏุงุฏุงุชู ุงูุดุฎุตูุฉ**\n\n**ุงูุชุบููุฑุงุช ุณุงุฑูุฉ ููุฑุงู:**\nโข ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช\nโข ุชูุถููุงุช ุงูุนุฑุถ\nโข ุฅุนุฏุงุฏุงุช ุงูุฎุตูุตูุฉ\n\n๐ก **ูุตูุญุฉ:** ููููู ูุฑุงุฌุนุฉ ุฅุนุฏุงุฏุงุชู ูู ุฃู ููุช",
        "profile_updated": "๐ค ุชู ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู ุจูุฌุงุญ!\n\nโ **ุชู ุชุญุฏูุซ ูุนูููุงุชู ุงูุดุฎุตูุฉ**\n\n**ุงููุนูููุงุช ุงููุญุฏุซุฉ:**\nโข ุงูุงุณู ุงููุงูู\nโข ูุนูููุงุช ุงูุงุชุตุงู\nโข ุงูุชูุถููุงุช ุงูุดุฎุตูุฉ\n\n๐ก **ูุตูุญุฉ:** ุฑุงุฌุน ูุนูููุงุชู ุจุงูุชุธุงู ููุชุฃูุฏ ูู ุตุญุชูุง",
    }

    return success_messages.get(
        action,
        "โ ุชู ุชูููุฐ ุงูุนูููุฉ ุจูุฌุงุญ!\n\n๐ **ุนูููุฉ ูุงุฌุญุฉ**\n\n๐ก **ูุตูุญุฉ:** ุงุณุชุฎุฏู ุงูุฃุฒุฑุงุฑ ููุชููู ุจูู ุงูููุฒุงุช",
    )


def get_info_message(info_type: str) -> str:
    """Returns enhanced info messages with clear guidance."""
    info_messages = {
        "not_registered": "โ ูู ูุชู ุชุณุฌููู ุจุนุฏ\n\n**ููุจุฏุก:**\nโข ุงุถุบุท ุนูู '๐ ุชุณุฌูู ุงูุฏุฎูู ููุฌุงูุนุฉ'\nโข ุฃุฏุฎู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ\nโข ุณุชุชููู ูู ุงููุตูู ูุฌููุน ุงูููุฒุงุช\n\n๐ **ุงูุฃูุงู:**\nุจูุงูุงุชู ูุดูุฑุฉ ููุญููุฉ ุจุงููุงูู",
        "no_permission": "๐ซ ููุณ ูุฏูู ุตูุงุญูุฉ ุงููุตูู\n\n**ุงููุนูููุงุช:**\nโข ูุฐู ุงูููุฒุฉ ูุชุงุญุฉ ูููุทูุฑ ููุท\nโข ุฅุฐุง ููุช ุงููุทูุฑุ ุชุฃูุฏ ูู ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ\nโข ูููุณุงุนุฏุฉุ ุชูุงุตู ูุน ุงูุฏุนู\n\n๐ ูููุณุงุนุฏุฉ: ุงุถุบุท '๐ ุงูุฏุนู ุงูููู'",
        "maintenance": "๐ง ุงูุจูุช ูู ุงูุตูุงูุฉ ุญุงููุงู\n\n**ุงููุนูููุงุช:**\nโข ูุชู ุฅุฌุฑุงุก ุชุญุฏูุซุงุช ูุชุญุณููุงุช\nโข ุฌุฑุจ ูุฑุฉ ุฃุฎุฑู ุจุนุฏ 10-15 ุฏูููุฉ\nโข ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุชูุงุตู ูุน ุงูุฏุนู\n\n๐ ูููุณุงุนุฏุฉ: ุงุถุบุท '๐ ุงูุฏุนู ุงูููู'",
        "coming_soon": "๐ง ูุฑูุจุงู: ูุฐู ุงูููุฒุฉ ุณุชุชููุฑ ูุงุญูุงู\n\n**ุงูููุฒุงุช ุงููุงุฏูุฉ:**\nโข ุชุญุณููุงุช ุนูู ุงููุงุฌูุฉ\nโข ููุฒุงุช ุฅุถุงููุฉ\nโข ุชุญุณููุงุช ุนูู ุงูุฃูุงู\n\n๐ก **ูุตูุญุฉ:** ุชุงุจุน ุงูุชุญุฏูุซุงุช ููุญุตูู ุนูู ุฃุญุฏุซ ุงูููุฒุงุช",
    }

    return info_messages.get(
        info_type,
        "โน๏ธ ูุนูููุงุช\n\n๐ก **ูุนูููุงุช ูููุฏุฉ**\n\n๐ ูููุณุงุนุฏุฉ: ุงุถุบุท '๐ ุงูุฏุนู ุงูููู'",
    )


def get_registration_success_message(username: str) -> str:
    """Returns an enhanced registration success message."""
    return (
        f"โ ุชู ุชุณุฌูู ุงูุฏุฎูู ุจูุฌุงุญ!\n\n"
        f"๐ **ูุฑุญุจุงู {username}**\n\n"
        f"๐ **ูุฑุญุจุงู ุจู ูู ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงูุฌุงูุนูุฉ**\n\n"
        f"**ููููู ุงูุขู:**\n"
        f"โข ๐ ูุชุงุจุนุฉ ุฏุฑุฌุงุชู ุจุณูููุฉ\n"
        f"โข ๐ ุงุณุชูุงู ุฅุดุนุงุฑุงุช ููุฑูุฉ\n"
        f"โข ๐ฑ ุงุณุชุฎุฏุงู ูุงุฌูุฉ ุณููุฉ\n"
        f"โข ๐ ุงูุงุณุชูุชุงุน ุจุญูุงูุฉ ูุงููุฉ\n\n"
        f"๐ก **:** ุฌุฑุจ '๐ ุฏุฑุฌุงุช ุงููุตู ุงูุญุงูู' ูุฑุคูุฉ ุฃุญุฏุซ ุฏุฑุฌุงุชู\n\n"
        f"๐ **ุงูุฃูุงู:**\n"
        f"ุจูุงูุงุชู ูุดูุฑุฉ ููุญููุฉ ุจุงููุงูู"
    )


def get_credentials_security_info_message() -> str:
    """Returns an enhanced security info message for credential collection."""
    return (
        "๐ **ูุนูููุงุช ุงูุฃูุงู - ุจูุงูุงุช ุชุณุฌูู ุงูุฏุฎูู**\n\n"
        "**ููุงุฐุง ูุทูุจ ุจูุงูุงุชู ุงูุฌุงูุนูุฉุ**\n"
        "ูุญุชุงุฌ ุฅูู ุงุณู ุงููุณุชุฎุฏู ููููุฉ ุงููุฑูุฑ ููุท ูุชุณุฌูู ุงูุฏุฎูู ุฅูู ูุธุงู ุงูุฌุงูุนุฉ ูุฌูุจ ุฏุฑุฌุงุชู.\n\n"
        "**ููู ูุญูู ุจูุงูุงุชู:**\n"
        "โ ูุง ูุฎุฒู ูููุฉ ุงููุฑูุฑ ููุงุฆูุงู\n"
        "โ ูุชู ุญุฐููุง ููุฑุงู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู\n"
        "โ ุฌููุน ุงูุจูุงูุงุช ูุดูุฑุฉ\n"
        "โ ููููู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ูู ุฃู ููุช\n\n"
        "**ูุตุงุฆุญ ุงูุฃูุงู:**\n"
        "๐ ุงุณุชุฎุฏู ูููุฉ ูุฑูุฑ ูููุฉ\n"
        "๐ ูุง ุชุดุงุฑู ุจูุงูุงุชู ูุน ุฃู ุดุฎุต\n"
        "๐ ููููู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ูู ุจูุงุจุฉ ุงูุฌุงูุนุฉ\n\n"
        "**ููุฃูุงู ุงููุงูู:**\n"
        "ููุตุญ ุจุงุณุชุฎุฏุงู ูููุฉ ูุฑูุฑ ุฎุงุตุฉ ููุฐุง ุงูุญุณุงุจ ูุนุฏู ูุดุงุฑูุชูุง ูุน ุฃู ุฎุฏูุฉ ุฃุฎุฑู.\n\n"
        "๐ **ุจูุงูุงุชู ุขููุฉ ููุดูุฑุฉ ุจุงููุงูู**"
    )
